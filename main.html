<!doctype html>
<html ng-app="ChildSoldier">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>Child Soldier</title>

        <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Raleway" />

        <link rel="stylesheet" href="assets/css/normalize.css">
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.css">

        <link rel="stylesheet" href="assets/css/childsoldier.css">
        <link rel="stylesheet" href="assets/css/animations.css">
        <link rel="stylesheet" href="assets/css/map.css">
        <link rel="stylesheet" href="assets/css/legend.css">

        <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/angular_material/1.1.0-rc2/angular-material.min.css">
    </head>

    <!-- This is used for the nested sections -->
    <script type="text/ng-template"  id="section_renderer">
        <div><a ng-click="selectSection(section)">{{section.title}}</a></div>
        <div ng-if="openSections.indexOf(section.id) != -1">
            <div ng-bind-html="section.content"></div>
            <ul>
                <li ng-repeat="section in section.children" ng-include="'section_renderer'"></li>
            </ul>
            </div>
    </script>

    <body id="homepage" class="homepage" ng-controller="MainCtrl as vm">

        <div class="container-fluid">
            <div class="row" ng-controller="MapCtrl">
                <!--Fixed map panel allowing for map modification-->
                <div class="map_panel row" ng-hide="vm.mainPage">
                    <div class="hide_btn col-xs-6" ng-click="vm.changeReportSize()"></div>
                    <div class="filter_btn col-xs-6" ng-click="switchFilterVisible()"></div>
                </div>

                <div class="col-sm-3 col-md-2 sidebar">
                    <a ng-click="vm.changeBackground('home'); vm.setCurrentCountry(null); setCurrentMap(null)"><img class="logo" src="assets/img/logo.png"></a>
                    <ul class="nav nav-sidebar">
                        <li ng-repeat="country in vm.countries" ng-class="{'active':vm.isCurrentCountry(country)}">
                            <a ng-click="vm.changeBackground('tab'); vm.setCurrentCountry(country); setCurrentMap(country)">
                                {{country.name}}
                            </a>
                        </li>
                    </ul>
                    <img class="sidebar-footer" src="assets/img/dal_logo.png">

                </div>
                <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">


                    <div class="row" ng-hide="vm.mainPage">
                        <!-- TAB NAVIGATION -->
                        <div class="col-xs-6 row" ng-style="vm.reportPanel">
                            <div class="col-xs-11 scrollable">
                                <h1 align="center"> {{vm.currentCountry.name}} </h1>
                                <md-content>
                                    <md-tabs md-dynamic-height md-border-bottom md-center-tabs>
                                        <md-tab label="Reports">
                                            <md-content class="md-padding">
                                                <h6 class="md-title">Reports</h6>
                                                    <div ng-class="{active: vm.isSelectedReport(report.id)}" ng-show="vm.currentCountry != null"
                                                    ng-repeat="report in vm.reports | filter:{country:vm.currentCountry.id}"
                                                    class="active tab-pane fade in" id="tab1">
                                                    <a ng-click="vm.setCurrentReport(report)" target="_blank">
                                                        {{report.title}} - {{report.subtitle}}
                                                    </a>
                                                    <div ng-repeat="section in vm.sections | filter:{report:vm.currentReport.id}"
                                                    ng-show="vm.currentReport != null"
                                                    ng-include="'section_renderer'">
                                                    </div>
                                                </div>
                                            </md-content>
                                        </md-tab>
                                        <md-tab label="Placeholder">
                                            <md-content class="md-padding">
                                                <h6 class="md-title">Title for Tab 2 Content</h6>
                                                <p>Integer turpis erat, porttitor vitae mi faucibus, laoreet interdum tellus. Curabitur posuere molestie dictum. Morbi eget congue risus, quis rhoncus quam. Suspendisse vitae hendrerit erat, at posuere mi. Cras eu fermentum nunc. Sed id ante eu orci commodo volutpat non ac est. Praesent ligula diam, congue eu enim scelerisque, finibus commodo lectus.</p>
                                            </md-content>
                                        </md-tab>
                                        <md-tab label="Placeholder">
                                            <md-content class="md-padding">
                                                <h6 class="md-title">Title for Tab 3 Content</h6>
                                                <p>Integer turpis erat, porttitor vitae mi faucibus, laoreet interdum tellus. Curabitur posuere molestie dictum. Morbi eget congue risus, quis rhoncus quam. Suspendisse vitae hendrerit erat, at posuere mi. Cras eu fermentum nunc. Sed id ante eu orci commodo volutpat non ac est. Praesent ligula diam, congue eu enim scelerisque, finibus commodo lectus.</p>
                                            </md-content>
                                        </md-tab>
                                    </md-tabs>
                                </md-content>
                            </div>
                        </div>

                        <!--Div of the map, with the script that loads icon objects and adds them to the map-->
                        <div ng-show="vm.mapVisible" class="row col-xs-6 map_div">
                            <div class="panel panel-default col-xs-6 filter" ng-show="showFilter">
                                <div class="legend-filter">
                                    <div class="legend-title">Incidents Color legend</div>
                                    <div class="legend-scale panel-body">
                                        <ul class="legend-labels">
                                            <li>
                                                <p class="textStyle">
                                                    <button id="hotspot_1" class="btn btn-primary btn-xs"  ng-click="filterHotspots(1)">
                                                        <img src="assets/img/murder_maiming_legend.png" alt="Killing and Maiming Icon">
                                                    </button>
                                                    Killing and Maiming of children
                                                </p>
                                            </li>
                                            <li>
                                                <p class="textStyle">
                                                    <button id="hotspot_2" class="btn btn-primary btn-xs"  ng-click="filterHotspots(2)">
                                                        <img src="assets/img/recruitment_legend.png" alt="Recruitment Icon">
                                                    </button>
                                                    Recruitment or use of children as soldiers
                                                </p>
                                            </li>
                                            <li>
                                                <p class="textStyle">
                                                    <button id="hotspot_3" class="btn btn-primary btn-xs"  ng-click="filterHotspots(3)">
                                                        <img src="assets/img/sexual_violence_legend.png" alt="Sexual Violence Icon">
                                                    </button>
                                                    Sexual violence against children
                                                </p>
                                            </li>
                                            <li>
                                                <p class="textStyle">
                                                    <button id="hotspot_4" class="btn btn-primary btn-xs"  ng-click="filterHotspots(4)">
                                                        <img src="assets/img/attack_legend.png" alt="Attack Against School or Hospital Icon">
                                                    </button>
                                                    Attacks against schools or hospitals
                                                </p>

                                            </li>
                                            <li>
                                                <p class="textStyle">
                                                    <button id="hotspot_5" class="btn btn-primary btn-xs"  ng-click="filterHotspots(5)">
                                                        <img src="assets/img/hum_denial_legend.png" alt="Denial of Humanitarian Aid Icon">
                                                    </button>
                                                    Denial of humanitarian access for children
                                                </p>
                                            </li>
                                            <li>
                                                <p class="textStyle">
                                                    <button id="hotspot_6" class="btn btn-primary btn-xs"  ng-click="filterHotspots(6)">
                                                        <img src="assets/img/abduction_legend.png" alt="Abduction Icon">
                                                    </button>
                                                    Abduction of children
                                                </p>
                                            </li>
                                            <li>
                                                <p class="textStyle">
                                                    <button id="hotspot_7" class="btn btn-primary btn-xs"  ng-click="filterHotspots(7)">
                                                        <img src="assets/img/other_legend.png" alt="Other Icon">
                                                    </button>
                                                    Other
                                                </p>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="legend-title"> Filter by Date: </div>
                                    <form>
                                        <md-content>
                                            <label class="dateLabel">Starting Date:</label>
                                            <md-datepicker ng-model="startingInput.value" md-placeholder="mm/dd/yyyy"></md-datepicker>
                                            <label class="dateLabel">Ending Date:</label>
                                            <md-datepicker ng-model="endingInput.value" md-placeholder="mm/dd/yyyy"></md-datepicker>
                                        </md-content>
                                        <br/>
                                        <p id="errorMessage"> </p>
                                    </form>
                                </div>
                            </div>
                            <leaflet class="map col-xs-11" center="country" markers="markers"></leaflet>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.0/angular-sanitize.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-animate.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-aria.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.3/angular-messages.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/angular_material/1.1.0-rc2/angular-material.min.js"></script>
        <script src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-leaflet-directive/0.10.0/angular-leaflet-directive.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>



        <script src="app/childsoldier.js"></script>
    </body>
</html>